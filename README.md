# VK Discord RPC Bridge üéµüöÄ

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ç—Ä–µ–∫–∞ –∏–∑ VK Music –≤ —Å—Ç–∞—Ç—É—Å–µ Discord —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º Rich Presence. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã.

![image](https://github.com/user-attachments/assets/c1efcdcd-7118-4059-b1e8-0023157e18ff)

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ‚ú® 

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Rich Presence 
  –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ç—Ä–µ–∫, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°–∏—Å—Ç–µ–º–Ω—ã–π —Ç—Ä–µ–π üì≥  
  –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –≤ —Ç—Ä–µ–π —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –æ —Å–º–µ–Ω–µ —Ç—Ä–µ–∫–æ–≤
- –ê–≤—Ç–æ-–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ üîå  
  –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–≤—è–∑—å —Å Discord –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
- –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ üé®  
  –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π/—Å–≤–µ—Ç–ª–æ–π —Ç–µ–º)
- –í–µ–±-—Å–µ—Ä–≤–µ—Ä üåê  
  –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ localhost:8112
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ üìù  
  –ü–æ–¥—Å–≤–µ—á–µ–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —É—Ä–æ–≤–Ω—è–º –≤–∞–∂–Ω–æ—Å—Ç–∏

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ üõ†Ô∏è

- Python 3.8+
- PyQt5 (GUI)
- Discord RPC API
- Socket.IO (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
- Plyer (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ üöÄ

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/–≤–∞—à-–ª–æ–≥–∏–Ω/vk-discord-rpc.git 
cd vk-discord-rpc

```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:
```bash
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tampermonkey: https://chromewebstore.google.com/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: // ==UserScript==
// @name         Vk Music RPC hook
// @namespace    http://tampermonkey.net/
// @version      2.0.0
// @description  This extension is a hook for the vk-discord-rpc project on github
// @author       TofaDev, Suburbanno
// @updateURL    https://raw.githubusercontent.com/Suburbanno/vk-music-rpc/main/vk-extension.js
// @downloadURL  https://raw.githubusercontent.com/Suburbanno/vk-music-rpc/main/vk-extension.js
// @match        *://vk.com/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=vk.com
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_registerMenuCommand
// @require      https://cdn.socket.io/4.0.0/socket.io.min.js
// ==/UserScript==

const getCurrentPlayingMusic = () => {
  var wrap = document.querySelector(".top_audio_player_title_wrap");
  var textMusicDiv = wrap.querySelector("div");

  return textMusicDiv.textContent;
};

const musicIsPlaying = (musicPlayer) => {
  return musicPlayer.classList.contains("top_audio_player_playing");
};

let serverUrl = GM_getValue("serverUrl", "ws://localhost:8112");

GM_registerMenuCommand("Set the websocket server address", () => {
  let url = prompt(
    "Enter the address for the websocket server in the format: ws://host:port",
    serverUrl
  );
  if (url) {
    serverUrl = url;
    GM_setValue("serverUrl", url);
  }
});

(function () {
  "use strict";

  const musicPlayer = document.getElementById("top_audio_player");

  if (!musicPlayer) return;

  const socket = io.connect(serverUrl);

  socket.on("connect", () => {
    console.log("connected to vk-discord-rpc server");

    let lastSong = null;
    let isSongPaused = false;

    setInterval(() => {
      if (!musicIsPlaying(musicPlayer)) {
        if (!isSongPaused) {
          socket.emit("song_paused", "song is paused");
          isSongPaused = true;
        }
        lastSong = null;
        return;
      }

      isSongPaused = false;

      let currentSong = getCurrentPlayingMusic();

      if (lastSong === currentSong) return;

      lastSong = currentSong;

      let splittedSong = currentSong.split("‚Äî");

      socket.emit("song_changed", {
        artist: splittedSong[0],
        songName: splittedSong[1],
        source: "VK",
      });
    }, 500);
  });
})();

```

- –í–∫–ª—é—á–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–π –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö VK

- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Discord –∑–∞–ø—É—â–µ–Ω


 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ üéÆ
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä"
- –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ VK —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞



–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è by Drakkk & cassius
